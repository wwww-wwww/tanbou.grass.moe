(()=>{(function(){var o=d();function d(){if(typeof window.CustomEvent=="function")return window.CustomEvent;function e(t,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),a}return e.prototype=window.Event.prototype,e}function c(e,t){var n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,n}function r(e,t){var n=e.getAttribute("data-to"),a=c("_method",e.getAttribute("data-method")),s=c("_csrf_token",e.getAttribute("data-csrf")),l=document.createElement("form"),i=document.createElement("input"),u=e.getAttribute("target");l.method=e.getAttribute("data-method")==="get"?"get":"post",l.action=n,l.style.display="none",u?l.target=u:t&&(l.target="_blank"),l.appendChild(s),l.appendChild(a),document.body.appendChild(l),i.type="submit",l.appendChild(i),i.click()}window.addEventListener("click",function(e){var t=e.target;if(!e.defaultPrevented)for(;t&&t.getAttribute;){var n=new o("phoenix.link.click",{bubbles:!0,cancelable:!0});if(!t.dispatchEvent(n))return e.preventDefault(),e.stopImmediatePropagation(),!1;if(t.getAttribute("data-method"))return r(t,e.metaKey||e.shiftKey),e.preventDefault(),!1;t=t.parentNode}},!1),window.addEventListener("phoenix.link.click",function(e){var t=e.target.getAttribute("data-confirm");t&&!window.confirm(t)&&e.preventDefault()},!1)})();collection_view_back.addEventListener("click",o=>{collection_view_back.style.display="none",collection_view.style.display="none"});collection_view.addEventListener("click",o=>{o.target!=collection_view&&o.target.tagName!="IMG"||(collection_view_back.style.display="none",collection_view.style.display="none")});Array.from(document.getElementsByClassName("collection")).forEach(o=>{o.addEventListener("click",d=>{collection_view_back.style.display="block",collection_view.style.display="flex";let c=[...o.children[0].children].map(i=>i.children[0]);for(let i=0;i<4;i++)collection_view_labels.children[i].style.display="none";for(let i=0;i<c.length;i++)collection_view_images.children[i].src=c[i].src,requestAnimationFrame(()=>collection_view_images.children[i].src=c[i].getAttribute("fullsize")),collection_view_labels.children[i].style.display="unset";let r=0;d.target.tagName=="IMG"&&(r=c.findIndex(i=>i.src==d.target.src)),Array.from(collection_view.children[0].children).filter(i=>i.tagName=="INPUT")[r].checked=!0;let e=c[r].getBoundingClientRect(),t=collection_view_images.children[r].getBoundingClientRect(),n=e.width/t.width,a=e.height/t.height,s=e.left-t.left*n,l=e.top-t.top*a;collection_view.animate([{transformOrigin:"top left",transform:`translate(${s}px, ${l}px) scale(${n},${a})`,opacity:0},{transformOrigin:"top left",transform:"none",opacity:1}],{duration:200,easing:"ease-out",fill:"both"}),collection_view_back.animate([{opacity:0},{opacity:1}],{duration:100,easing:"ease-out",fill:"both"})})});})();

(()=>{(function(){var o=d();function d(){if(typeof window.CustomEvent=="function")return window.CustomEvent;function t(e,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(e,i.bubbles,i.cancelable,i.detail),c}return t.prototype=window.Event.prototype,t}function a(t,e){var i=document.createElement("input");return i.type="hidden",i.name=t,i.value=e,i}function r(t,e){var i=t.getAttribute("data-to"),c=a("_method",t.getAttribute("data-method")),s=a("_csrf_token",t.getAttribute("data-csrf")),l=document.createElement("form"),n=document.createElement("input"),u=t.getAttribute("target");l.method=t.getAttribute("data-method")==="get"?"get":"post",l.action=i,l.style.display="none",u?l.target=u:e&&(l.target="_blank"),l.appendChild(s),l.appendChild(c),document.body.appendChild(l),n.type="submit",l.appendChild(n),n.click()}window.addEventListener("click",function(t){var e=t.target;if(!t.defaultPrevented)for(;e&&e.getAttribute;){var i=new o("phoenix.link.click",{bubbles:!0,cancelable:!0});if(!e.dispatchEvent(i))return t.preventDefault(),t.stopImmediatePropagation(),!1;if(e.getAttribute("data-method"))return r(e,t.metaKey||t.shiftKey),t.preventDefault(),!1;e=e.parentNode}},!1),window.addEventListener("phoenix.link.click",function(t){var e=t.target.getAttribute("data-confirm");e&&!window.confirm(e)&&t.preventDefault()},!1)})();collection_view_back.addEventListener("click",o=>{collection_view_back.style.display="none",collection_view.style.display="none"});collection_view.addEventListener("click",o=>{o.target!=collection_view&&o.target.tagName!="IMG"||(collection_view_back.style.display="none",collection_view.style.display="none")});Array.from(document.getElementsByClassName("collection")).forEach(o=>{o.addEventListener("click",d=>{collection_view_back.style.display="block",collection_view.style.display="flex";let a=[...o.children[0].children].map(n=>n.children[0]);for(let n=0;n<4;n++)collection_view_labels.children[n].style.display="none";for(let n=0;n<a.length;n++)collection_view_images.children[n].src=a[n].getAttribute("fullsize"),collection_view_labels.children[n].style.display="unset";let r=0;d.target.tagName=="IMG"&&(r=a.findIndex(n=>n.src==d.target.src)),Array.from(collection_view.children[0].children).filter(n=>n.tagName=="INPUT")[r].checked=!0;let t=a[r].getBoundingClientRect(),e=collection_view_images.children[r].getBoundingClientRect(),i=t.width/e.width,c=t.height/e.height,s=t.left-e.left*i,l=t.top-e.top*c;collection_view.animate([{transformOrigin:"top left",transform:`translate(${s}px, ${l}px) scale(${i},${c})`,opacity:0},{transformOrigin:"top left",transform:"none",opacity:1}],{duration:200,easing:"ease-out",fill:"both"}),collection_view_back.animate([{opacity:0},{opacity:1}],{duration:100,easing:"ease-out",fill:"both"})})});})();
